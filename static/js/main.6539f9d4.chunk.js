(this["webpackJsonpmaterial-pg-01"]=this["webpackJsonpmaterial-pg-01"]||[]).push([[0],{104:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(10),r=a.n(c);a(104),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(67),s=a(35),l=a.n(s),u=a(66),d=a(23),p=a(24),m=a(29),h=a(28),j=a(6),b=a(179),f=a(173),v=a(172),x=a(174),O=a(170),y=a(176),g=a(83),k=a.n(g),C=a(87),w=a(171),S=a(85),B=a(133),F=a(65),A=a.n(F),N=a(84),_=a.n(N),I=a(39),D=a(5),T=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._handleUpload=n._handleUpload.bind(Object(I.a)(n)),n}return Object(p.a)(a,[{key:"_handleUpload",value:function(e){var t=e.target.files[0];this.props.onChange(t),this.fileInput.value=null}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{style:this.props.style,children:[Object(D.jsx)("input",{accept:this.props.accept,type:"file",style:{display:"none"},onChange:this._handleUpload,ref:function(t){return e.fileInput=t}}),i.a.cloneElement(this.props.children,{onClick:function(){return e.fileInput.click()}})]})}}]),a}(i.a.Component),z=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._validate=n._validate.bind(Object(I.a)(n)),n}return Object(p.a)(a,[{key:"_validate",value:function(e){var t=this.props,a=t.onError,n=t.onChange,i=t.maxSize,c=t.extensions;if(e){if(c){var r=e.name.split(".").pop().toLowerCase();if(!c.map((function(e){return e.toLowerCase()})).includes(r))return void a("Must upload a file of type: ".concat(c.join(" or ")))}var o=1e6*i;e.size>o?a("File size must be less than ".concat(i," MB.")):n(e)}else a("Failed to upload a file.")}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.style,n=this.props.extensions.map((function(e){return".".concat(e)})).join(",");return Object(D.jsx)(T,{onChange:this._validate,style:a,accept:n,children:t})}}]),a}(i.a.Component);z.defaultProps={maxSize:2};var R=z,W=a(55),M=a(178),U=a(168),q=a(169),E=a(82),L=a.n(E),P=a(177),V=a(181),H=a(166),J=a(162),X=a(165);function G(e){var t=e.outputFormat,a=e.setOutputFormat,n=e.style;return Object(D.jsxs)(J.a,{component:"fieldset",style:n,children:[Object(D.jsx)(X.a,{component:"legend",children:"Output Format"}),Object(D.jsxs)(V.a,{"aria-label":"format",name:"format",value:t,onChange:function(e){a(e.target.value)},children:[Object(D.jsx)(H.a,{value:"m4b",control:Object(D.jsx)(P.a,{}),label:"AAC m4b"}),Object(D.jsx)(H.a,{value:"flac",control:Object(D.jsx)(P.a,{}),label:"FLAC hq"}),Object(D.jsx)(H.a,{value:"mp3",control:Object(D.jsx)(P.a,{}),label:"Lame mp3"})]})]})}function K(e){var t=e.operatingSystem,a=e.setOperatingSystem,n=e.style;return Object(D.jsxs)(J.a,{component:"fieldset",style:n,children:[Object(D.jsx)(X.a,{component:"legend",children:"Operating System"}),Object(D.jsxs)(V.a,{"aria-label":"format",name:"format",value:t,onChange:function(e){return a(e.target.value)},children:[Object(D.jsx)(H.a,{value:"win",control:Object(D.jsx)(P.a,{}),label:"Windows"}),Object(D.jsx)(H.a,{value:"linux",control:Object(D.jsx)(P.a,{}),label:"Linux"}),Object(D.jsx)(H.a,{value:"osx",control:Object(D.jsx)(P.a,{}),label:"Mac"})]})]})}var Y=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).DarkerDisabledTextField=Object(j.a)({root:{marginRight:8,"& .MuiInputBase-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.6)"}}})(x.a),n.setExpanded=function(e){return n.setState({expanded:e})},n.handleChange=function(e){return function(t,a){n.setExpanded(!!a&&e)}},n.getCommand=function(){var e,t=n.state,a=t.outputFormat,i=t.operatingSystem,c=n.props,r=c.fileName,o=c.activationBytes;o=null!==(e=o)&&void 0!==e?e:"00000000";var s=r.split(".")[0];s="input"==s?"output":s;var l=[{os:"win",cmd:"ffmpeg.exe",discriminator:'"'},{os:"linux",cmd:"./ffmpeg",discriminator:"'"},{os:"osx",cmd:"./ffmpeg",discriminator:"'"}].filter((function(e){return e.os==i}))[0],u=[{format:"m4b",codec:"copy"},{format:"flac",codec:"flac"},{format:"mp3",codec:"libmp3lame"}].filter((function(e){return e.format==a}))[0].codec,d=l.cmd,p=l.discriminator;return"".concat(d," -y")+" -activation_bytes ".concat(o," -i  ").concat(p,".\\").concat(r).concat(p)+" -map_metadata 0 -id3v2_version 3"+" -codec:a ".concat(u)+" -vn ".concat(p).concat(s,".").concat(a).concat(p)},n.state={expanded:"",outputFormat:"m4b",operatingSystem:"win"},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.expanded,i=a.outputFormat,c=a.operatingSystem;return Object(D.jsx)("div",{className:t.root,children:Object(D.jsxs)(M.a,{expanded:"panel2"===n,onChange:this.handleChange("panel2"),children:[Object(D.jsxs)(U.a,{expandIcon:Object(D.jsx)(L.a,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:[Object(D.jsx)(C.a,{className:t.heading,children:"Command"}),Object(D.jsx)(C.a,{className:t.secondaryHeading,children:"Generate ffmpeg command"})]}),Object(D.jsxs)(q.a,{style:{display:"block"},children:[Object(D.jsx)(G,{outputFormat:i,setOutputFormat:function(t){return e.setState({outputFormat:t})}}),Object(D.jsx)(K,{operatingSystem:c,setOperatingSystem:function(t){return e.setState({operatingSystem:t})},style:{paddingLeft:"20px"}}),Object(D.jsx)(this.DarkerDisabledTextField,{value:this.getCommand(),disabled:!0,multiline:!0,variant:"outlined",margin:"normal",fullWidth:!0,id:"activationBytes",label:"cmd",name:"activationBytes",autoComplete:"activationBytes","aria-readonly":!0,fontSize:5,InputProps:{readOnly:!0,endAdornment:Object(D.jsx)(W.CopyToClipboard,{text:this.getCommand(),children:Object(D.jsx)(B.a,{children:Object(D.jsx)(A.a,{})})})}})]})]})})}}]),a}(i.a.Component),$=Object(j.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}))(Y),Q=(a(114),a(46)),Z=a.n(Q),ee=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).DarkerDisabledTextField=Object(j.a)({root:{marginRight:8,"& .MuiInputBase-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.6)"}}})(x.a),n.Copyright=function(){return Object(D.jsxs)(C.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(D.jsx)(O.a,{color:"inherit",href:"https://audible-tools.github.io/",children:"audible-tools"})," ",(new Date).getFullYear(),"."]})},n.setChecksum=function(e){e.length>40||n.setState({checksum:e})},n.isChecksumValid=function(){var e=n.state.checksum;return RegExp("[a-f0-9]{40}").test(e)},n.isInputInvalid=function(){var e=n.state.checksum;return!(!e||""===e)&&!n.isChecksumValid()},n.addNotification=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Q.store.addNotification({message:e,type:t?"success":"danger",insert:"bottom-left",container:"top-full",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3,onScreen:!1}})},n.requestActivationBytes=Object(u.a)(l.a.mark((function e(){var t,a,i,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.checksum,e.prev=1,e.next=4,fetch("https://aax.api.j-kit.me/api/v2/activation/"+t);case 4:return a=e.sent,e.next=7,a.json();case 7:i=e.sent,c=i.success,r=i.activationBytes,!0===c?(n.setState({activationBytes:r}),n.addNotification("Successfully resolved the activation bytes")):(n.setState({activationBytes:"UNKNOWN"}),n.addNotification("An error occured while resolving the activation bytes, please check your inputs",!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),n.setState({activationBytes:e.t0}),n.addNotification("An error occured while resolving the activation bytes, please check your inputs",!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),n.acceptFiles=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[0],e.next=3,n.acceptFile(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.acceptFile=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({fileName:t.name}),a=t.slice(653,673),e.t0=n,e.next=5,a.arrayBuffer();case 5:e.t1=e.sent,i=e.t0.buf2hex.call(e.t0,e.t1),n.setChecksum(i),n.requestActivationBytes();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={checksum:"",fileName:"input.aax"},n}return Object(p.a)(a,[{key:"buf2hex",value:function(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.checksum,i=a.activationBytes,c=a.fileName;return Object(D.jsxs)(w.a,{component:"main",maxWidth:"md",children:[Object(D.jsx)(v.a,{}),Object(D.jsxs)("div",{className:t.paper,children:[Object(D.jsx)(b.a,{className:t.avatar,children:Object(D.jsx)(k.a,{})}),Object(D.jsx)(C.a,{component:"h1",variant:"h5",children:"AAX Checksum Resolver"}),Object(D.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(D.jsx)(S.a,{noClick:!0,onDrop:function(t){console.log(t),e.acceptFiles(t)},children:function(t){var a=t.getRootProps,i=t.getInputProps;return Object(D.jsx)("section",{children:Object(D.jsxs)("div",Object(o.a)(Object(o.a)({},a()),{},{children:[Object(D.jsx)("input",Object(o.a)({},i())),Object(D.jsx)(x.a,{error:e.isInputInvalid(),variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"checksum",label:"Checksum or Drag&Drop .aax file -",name:"checksum",autoComplete:"checksum",autoFocus:!0,onChange:function(t){return e.setChecksum(t.target.value)},value:n,InputProps:{readOnly:!1,endAdornment:Object(D.jsx)(R,{extensions:["aax","AAX"],maxSize:99999,onChange:e.acceptFile,children:Object(D.jsx)(B.a,{children:Object(D.jsx)(_.a,{})})})}})]}))})}}),Object(D.jsx)(f.a,{fullWidth:!0,variant:"contained",onClick:function(){e.requestActivationBytes()},disabled:!this.isChecksumValid(),children:"Request Activation Bytes"}),Object(D.jsx)(this.DarkerDisabledTextField,{value:i,disabled:!0,variant:"outlined",margin:"normal",fullWidth:!0,id:"activationBytes",label:i?"":"Activation Bytes",name:"activationBytes",autoComplete:"activationBytes","aria-readonly":!0,InputProps:{readOnly:!0,endAdornment:Object(D.jsx)(W.CopyToClipboard,{text:i,children:Object(D.jsx)(B.a,{children:Object(D.jsx)(A.a,{})})})}})]})]}),Object(D.jsx)($,{fileName:c,activationBytes:i}),Object(D.jsx)(y.a,{mt:1,children:Object(D.jsx)(this.Copyright,{})})]})}}]),a}(i.a.Component),te=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}))(ee),ae=a(71);ae.a.initialize("UA-174657678-1"),ae.a.pageview(window.location.pathname+window.location.search),r.a.render(Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{style:{display:"flex"},children:Object(D.jsx)(Z.a,{})}),Object(D.jsx)(te,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.6539f9d4.chunk.js.map